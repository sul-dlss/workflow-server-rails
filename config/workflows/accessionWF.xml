<?xml version="1.0"?>
<workflow-def id="accessionWF">
  <process lifecycle="submitted" name="start-accession" sequence="1" status="completed">
    <label>Start Accessioning</label>
  </process>
  <process batch-limit="1000" error-limit="10" lifecycle="described" name="descriptive-metadata" sequence="2">
    <label>Descriptive Metadata</label>
    <prereq>start-accession</prereq>
  </process>
  <process batch-limit="1000" error-limit="10" name="content-metadata" sequence="3">
    <label>Content Metadata</label>
    <prereq>descriptive-metadata</prereq>
  </process>
  <process batch-limit="1000" error-limit="10" name="technical-metadata" sequence="4">
    <label>Technical Metadata</label>
    <prereq>content-metadata</prereq>
  </process>
  <process batch-limit="1" error-limit="5" name="shelve" sequence="5">
    <label>Shelve content in Digital Stacks</label>
    <prereq>technical-metadata</prereq>
  </process>
  <process batch-limit="100" error-limit="10" lifecycle="published" name="publish" sequence="6">
    <label>Publish Metadata</label>
    <prereq>shelve</prereq>
  </process>
  <process batch-limit="100" error-limit="10" name="update-doi" sequence="7">
    <label>Update DOI Metadata</label>
    <prereq>publish</prereq>
  </process>
  <process batch-limit="1" error-limit="5" name="sdr-ingest-transfer" sequence="8">
    <label>Initiate Ingest into Preservation</label>
    <prereq>publish</prereq>
  </process>
  <process batch-limit="1" error-limit="5" lifecycle="deposited" name="sdr-ingest-received" sequence="9" skip-queue="true">
    <label>Signal from SDR that object has been received</label>
  </process>
  <process batch-limit="1" error-limit="5" name="reset-workspace" sequence="10">
    <label>Reset workspace by renaming the druid-tree to a versioned directory</label>
    <prereq>sdr-ingest-received</prereq>
    <prereq>publish</prereq>
    <prereq>shelve</prereq>
  </process>
  <process batch-limit="1" error-limit="5" lifecycle="accessioned" name="end-accession" sequence="11">
    <label>Clean up any diff caches and set disseminationWF:cleanup to waiting</label>
    <prereq>update-doi</prereq>
    <prereq>reset-workspace</prereq>
  </process>
</workflow-def>
